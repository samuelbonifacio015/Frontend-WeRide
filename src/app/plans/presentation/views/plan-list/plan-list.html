<div class="plans-layout">
  <div class="plan-list-section">
    <h2>{{ 'plans.title' | translate }}</h2>
    <div *ngIf="loading$ | async" class="loading">{{ 'plans.loading' | translate }}</div>
    <button
      class="plan-card-btn"
      *ngFor="let plan of (plans$ | async)"
      (click)="selectPlan(plan)"
    >
      <span class="plan-title">{{ plan.name }}</span>
      <mat-icon>chevron_right</mat-icon>
    </button>
  </div>

  <div
    class="plan-detail-section"
    *ngIf="(selectedPlan$ | async) as selectedPlan"
  >
    <mat-card class="detail-card">
      <mat-card-header>
        <mat-card-title [style.color]="selectedPlan.color"
          >{{ selectedPlan.name }}</mat-card-title
        >
      </mat-card-header>
      <mat-card-content>
        <p class="plan-description">{{ selectedPlan.description }}</p>
        <div class="plan-info">
          <p>
            <strong>{{ 'plans.duration' | translate }}:</strong> {{ getFormattedDuration(selectedPlan) }}
          </p>
          <p><strong>{{ 'plans.price' | translate }}:</strong> {{ getFormattedPrice(selectedPlan) }}</p>
          <p>
            <strong>{{ 'plans.pricePerMinute' | translate }}:</strong> ${{ selectedPlan.pricePerMinute
            }}
          </p>
          <p>
            <strong>{{ 'plans.discount' | translate }}:</strong> {{ selectedPlan.discountPercentage }}%
          </p>
          <p>
            <strong>{{ 'plans.freeMinutesPerMonth' | translate }}:</strong> {{
            selectedPlan.freeMinutesPerMonth }}
          </p>
        </div>
        <div class="plan-benefits">
          <h4>{{ 'plans.benefits' | translate }}:</h4>
          <ul>
            <li *ngFor="let benefit of selectedPlan.benefits">{{ benefit }}</li>
          </ul>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button
          mat-raised-button
          color="primary"
          class="pay-button"
          (click)="onPayment(selectedPlan)"
        >
          {{ 'plans.pay' | translate }}
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
