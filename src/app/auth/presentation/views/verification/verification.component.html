<div class="verification-container">
  <div class="card">
    @if (authStore.error()) {
      <div class="error-toast">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="10" fill="#F04349"/>
          <path d="M15 9L9 15M9 9L15 15" stroke="white" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <div>
          <div class="error-title">{{ 'auth.verification.errorTitle' | translate }}</div>
          <div class="error-message">{{ authStore.error() }}</div>
        </div>
      </div>
    }

    <button class="back-button" (click)="goBack()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>

    <h1 class="title">{{ 'auth.verification.title' | translate }}</h1>
    <p class="subtitle">{{ 'auth.verification.subtitle' | translate }}</p>

    <div class="code-inputs">
      <input
        type="text"
        maxlength="1"
        id="code-0"
        [(ngModel)]="code()[0]"
        (input)="onCodeInput(0, $event)"
        (keydown)="onKeyDown(0, $event)"
        (paste)="onPaste($event)"
        class="code-input">

      @for (digit of [code()[1], code()[2], code()[3]]; track $index) {
        <input
          type="text"
          maxlength="1"
          [id]="'code-' + ($index + 1)"
          [(ngModel)]="code()[$index + 1]"
          (input)="onCodeInput($index + 1, $event)"
          (keydown)="onKeyDown($index + 1, $event)"
          class="code-input">
      }
    </div>


    <div class="terms">
      <p>Al continuar, aceptas la <a href="#" class="link">Política de privacidad</a> y los <a href="#" class="link">Términos de uso</a> de sesdven.</p>
    </div>

    <button class="btn-primary" (click)="continue()">Siguiente</button>
  </div>
</div>

